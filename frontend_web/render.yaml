services:
  - type: web
    name: ticketcolombia-frontend
    env: node
    buildCommand: |
      if [ ! -d "/opt/render/flutter" ]; then
        git clone https://github.com/flutter/flutter.git -b stable --depth 1 /opt/render/flutter
      else
        echo "Flutter already exists, skipping clone"
      fi
      export PATH="/opt/render/flutter/bin:$PATH"
      flutter config --no-analytics
      flutter precache --web
      flutter build web --release
      npm install
    startCommand: npm start
    envVars:
      - key: NODE_ENV
        value: production
